@using BlazorFinance.Shared.Entities
@inject HttpClient Http
@typeparam TValue


<Select 
    SelectedValue="SelectedValue"
    SelectedValueChanged="SelectedValueChanged"
>
    <SelectItem TValue="Account" Value="null">Select...</SelectItem>
    @if (_accounts != null){
        foreach (var account in _accounts){
            <SelectItem TValue="Account" Value="@(account)">@(account.Name)</SelectItem>
        }
    }
</Select>


@code {
    private List<Account> _accounts = new List<Account>();

    [Parameter]
    public TValue? SelectedValue { get; set; }

    [Parameter]
    public EventCallback<TValue> SelectedValueChanged { get; set; }

    protected override async Task OnInitializedAsync()
    {
        _accounts = await Http.GetFromJsonAsync<List<Account>>("account") ?? new List<Account>();
    }
}
